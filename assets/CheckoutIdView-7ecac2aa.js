import{_ as v,j as g,r as h,o as r,c as n,f as d,a as t,u as p,F as m,g as b,l,t as o,x as a,n as x}from"./index-d1f5a517.js";const y={data(){return{currency:g,orderId:"",orderInfo:{user:{}},couponCode:"",isLoading:!1}},methods:{getOrder(){const i=`https://vue3-course-api.hexschool.io/api/iris-lai-api/order/${this.orderId}`;this.isLoading=!0,this.$http.get(i).then(c=>{c.data.success?(this.orderInfo=c.data.order,this.couponCode=Object.values(this.orderInfo.products)[0].coupon?Object.values(this.orderInfo.products)[0].coupon.code:"",this.isLoading=!1):console.log(c.data.message)})},checkoutPay(){const i=`https://vue3-course-api.hexschool.io/api/iris-lai-api/pay/${this.orderId}`;this.isLoading=!0,this.$http.post(i,this.orderId).then(c=>{c.data.success?this.getOrder():console.log(c.data.message)})}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}},k={class:"container"},I={"aria-label":"breadcrumb"},C={class:"breadcrumb"},w={class:"breadcrumb-item"},L=t("li",{class:"breadcrumb-item active","aria-current":"page"},"訂單單筆",-1),O={class:"my-5 d-flex flex-column align-items-center"},N={class:"col-md-6 mb-4"},V={class:"cart-list"},j={class:"col-2 px-0"},B=["src"],P={class:"col-4 align-items-center"},A=t("div",{class:"text-secondary"},"商品",-1),E={class:"pb-2"},F={class:"col-3 align-items-center"},T=t("div",{class:"text-center text-secondary"},"數量",-1),q={class:"text-center"},z={class:"col-3 align-items-center justify-content-end"},D=t("div",{class:"text-center text-secondary"},"小計",-1),S={key:0,class:"text-center text-nowrap cart__item-price ps-2"},U={class:"d-flex"},G={key:0},H={class:"ps-2 fw-bolder"},J={class:"text-end fw-bolder mb-2 ms-auto"},K={class:"table mt-4"},M=t("th",{width:"100"},"Email",-1),Q=t("th",null,"姓名",-1),R=t("th",null,"收件人電話",-1),W=t("th",null,"收件人地址",-1),X=t("th",null,"付款狀態",-1),Y={key:0,class:"text-success"},Z={key:1,class:"text-danger"},$={class:"text-end"};function tt(i,c,et,st,e,u){const f=h("LoadingOverlay"),_=h("router-link");return r(),n(m,null,[d(f,{active:e.isLoading},null,8,["active"]),t("div",k,[t("nav",I,[t("ol",C,[t("li",w,[d(_,{to:"/checkout/checkoutAll"},{default:p(()=>[l("結帳")]),_:1})]),L])]),t("div",O,[t("div",N,[t("div",V,[(r(!0),n(m,null,b(e.orderInfo.products,s=>(r(),n("div",{class:"row mx-0 mb-2 pb-2 border-bottom",key:s.id},[t("div",j,[t("img",{src:s.product.imageUrl,class:"cart__image",alt:""},null,8,B)]),t("div",P,[A,t("div",E,o(s.product.title),1)]),t("div",F,[T,t("div",q,o(s.qty),1)]),t("div",z,[D,t("div",{class:x(["text-center text-nowrap cart__item-price",{"text-decoration-line-through":s.coupon}])},"$"+o(e.currency(s.product.price)),3),s.coupon?(r(),n("div",S,"$"+o(e.currency(s.final_total)),1)):a("",!0)])]))),128))]),t("div",U,[e.couponCode!==""?(r(),n("div",G,[l("使用折扣碼"),t("span",H,o(e.couponCode),1)])):a("",!0),t("div",J,"總金額 NT$"+o(e.currency(e.orderInfo.total)),1)]),t("table",K,[t("tbody",null,[t("tr",null,[M,t("td",null,o(e.orderInfo.user.email),1)]),t("tr",null,[Q,t("td",null,o(e.orderInfo.user.name),1)]),t("tr",null,[R,t("td",null,o(e.orderInfo.user.tel),1)]),t("tr",null,[W,t("td",null,o(e.orderInfo.user.address),1)]),t("tr",null,[X,t("td",null,[e.orderInfo.is_paid===!0?(r(),n("span",Y,"付款完成")):(r(),n("span",Z,"尚未付款"))])])])]),t("div",$,[d(_,{to:"/checkout/checkoutAll",class:"btn btn-success me-2"},{default:p(()=>[l("查看全部訂單")]),_:1}),e.orderInfo.is_paid===!1?(r(),n("button",{key:0,class:"btn btn-danger",onClick:c[0]||(c[0]=(...s)=>u.checkoutPay&&u.checkoutPay(...s))},"確認付款")):a("",!0)])])])])],64)}const ct=v(y,[["render",tt]]);export{ct as default};
